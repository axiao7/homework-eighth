/*! calculation 2015-08-26 */
function initialE(){output.value=Calculate(firstVal,secondVal,operator)}function Calculate(a,b,c){switch(c){case"+":return calculation.addNum(a,b);case"-":return calculation.minusNum(a,b);case"*":return calculation.multiplyNum(a,b);case"/":return calculation.divideNum(a,b)}}var EventUntil={addHandler:function(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent?a.attachEvent("on"+b,c):a["on"+b]=c},getEvent:function(a){return a?a:window.event},getTarget:function(a){return a.target||a.srcElement},preventDefault:function(a){a.preventDefault?a.preventDefault():a.returnValue=!1},stopPropagation:function(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0},removeHandler:function(a,b,c){a.removeHandler?a.removeHandler(b,c,!1):a.detachEvent?a.detachEvent("on"+b,c):a["on"+b]=null}},num=document.querySelectorAll(".num"),output=document.querySelector(".show"),container=document.querySelector(".calculation"),firstVal,secondVal,operator=null,isfalse=!0,n=0;EventUntil.addHandler(container,"click",function(a){evtR=EventUntil.getEvent(a),element=EventUntil.getTarget(evtR);var b=/^[\+\-\*\/]$/,c=/^[0-9]$/;if(b.test(element.value))operator&&(initialE(),isfalse=!1),n++,operator=element.value;else if(c.test(Number(element.value))){var d,e;"0"===output.value?e=Number(element.value):1===n?(e=Number(element.value),n++):isfalse?(d=output.value,e=d+element.value,e=Number(e)):e=Number(element.value),operator?isfalse?(secondVal=e,output.value=secondVal):(firstVal=Calculate(firstVal,secondVal,operator),secondVal=e,output.value=secondVal,isfalse=!0):(firstVal=e,output.value=firstVal)}else if("."===element.value){var d=output.value,e=d+".";output.value=e}else"="===element.value?initialE():(n=0,isfalse=!0,output.value=0,operator=null,firstVal=null,secondVal=null)});var calculation={addNum:function(a,b){var c,d=a.toString().split("."),e=b.toString().split("."),f=d[0].split(""),g=e[0].split(""),h=!1;if(Number(d[0])>=Number(e[0])){f.unshift(0);for(var i=f.length-1,j=g.length-1;j>=0;j--)h?(f[i]=Number(g[j])+Number(f[i])+1,h=!1):f[i]=Number(g[j])+Number(f[i]),f[i]>=10&&(f[i]-=10,h=!0),i--;for(var j=i;j>=0&&h;j--)f[j]=Number(f[j])+1,h=!1,f[j]>=10&&(f[j]-=10,h=!0);c=f}else{g.unshift(0);for(var i=g.length-1,j=f.length-1;j>=0;j--)h?(g[i]=Number(f[j])+Number(g[i])+1,h=!1):g[i]=Number(f[j])+Number(g[i]),g[i]>=10&&(g[i]-=10,h=!0),i--;for(var j=i;j>=0&&h;j--)g[j]=Number(g[j])+1,h=!1,g[j]>=10&&(g[j]-=10,h=!0),i--;c=g}return Number(c.join(""))},minusNum:function(a,b){var c,d=a.toString().split("."),e=b.toString().split("."),f=d[0].split(""),g=e[0].split(""),h=!1;if(Number(d[0])>=Number(e[0])){for(var i=f.length-1,j=g.length-1;j>=0;j--)f[i]=Number(f[i])-Number(g[j]),f[i]<0&&0===j&&(h=!0),f[i]<0&&(f[i]+=10),i--;for(var j=i;j>=0&&h;j--){f[j]=Number(f[j])-1,h=!1;var k=f[j]+1;0===k&&(f[j]+=10,h=!0)}c=f}else{for(var i=g.length-1,j=f.length-1;j>=0;j--)g[i]=Number(g[i])-Number(f[j]),g[i]<0&&0===j&&(h=!0),g[i]<0&&(g[i]+=10),i--;for(var j=i;j>=0&&h;j--){g[j]=Number(g[j])-1,h=!1;var k=g[j]+1;0===k&&(g[j]+=10,h=!0)}g.unshift("-"),c=g}return Number(c.join(""))},multiplyNum:function(a,b){for(var c=0,d=0;b>d;d++)c+=parseInt(calculation.addNum(a,0));return c>Math.pow(2,1024)?"Infinite":c},divideNum:function(a,b){if(0===b)return"Infinite";for(var c=b,d=a,e=[],f=0,g=0,h=0,i=0,j=0,k=1;b>a;)a*=10,f++;for(;d>c;)c*=10,i++;for(d%b==0&&j++;k;){for(var l=0;h>l;l++)e.push(0);for(h=0,e.push(Math.floor(a/b)),a=a%b*10;b>a&&0!=a;)a*=10,h++;if(g++,g>10)break;0==a&&k--}if(f){for(var l=0;f-1>l;l++)e.unshift(0);e.unshift("."),e.unshift("0")}else{if(j)return d/b;e.splice(i,0,".")}return e.join("")}};